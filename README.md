# miR-187-medaka-fertility
This repository contains all code used in our study on the role of miR-187 in adult ovarian follicle growth and female fertility in *Oryzias latipes* (medaka). It includes 3D imaging analysis and BRB-seq transcriptomic analysis comparing young adult (90 dph) miR-187‚Åª/‚Åª mutants to WT.

---

## Repository structure

### TEST1
- `scripts/python/` ‚Äî **Imaging (Python)**
  - 3D segmentation, filtering, quantification, batch processing
  - e.g. `img_segment_ovary.py`, `img_quantify_follicles.py`, `img_utils.py`

- `scripts/R/` ‚Äî **Imaging (R)** + small helpers for plots
  - R helpers for image-derived QC/plots or quick summaries
  - e.g. `img_viz3D.R`, `img_qc.R`

- `notebooks/BRBseq_analysis.Rmd` ‚Äî **Transcriptomics (BRB-seq)**
  - Full analysis notebook (QC ‚Üí DE ‚Üí enrichment), using R packages
  - Re-runs with `renv` to ensure reproducibility

- `data/` ‚Äî **No raw data stored here**
  - `data/README.md` explains where to download datasets (SRA/GEO/BIA accessions)
  - Put only small metadata/config files if needed

- `results/` ‚Äî **Outputs generated by the code**
  - `results/figures/` ‚Äî figures from imaging & BRB-seq
  - `results/tables/` ‚Äî CSV/TSV tables (counts, DE results, summaries)

- `docs/` ‚Äî Notes & method references (optional screenshots/schematics)

- Root files:
  - `environment.yml` ‚Äî Python environment for imaging
  - `CITATION.cff` ‚Äî citation metadata (DOI via Zenodo)
  - `.gitignore` ‚Äî ignores temporary files & large data
  - `README.md` ‚Äî you are here

### TEST2
```
miR187-medaka-fertility/
‚îú‚îÄ README.md
‚îú‚îÄ .gitignore
‚îú‚îÄ CITATION.cff
‚îú‚îÄ environment.yml
‚îÇ
‚îú‚îÄ scripts/
‚îÇ ‚îú‚îÄ python/
‚îÇ ‚îÇ ‚îú‚îÄ README.md # 3D imaging (Python)
‚îÇ ‚îÇ ‚îú‚îÄ img_segment_ovary.py
‚îÇ ‚îÇ ‚îî‚îÄ img_quantify_follicles.py
‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ R/
‚îÇ ‚îú‚îÄ README.md # Imaging helpers / plotting (R)
‚îÇ ‚îî‚îÄ img_viz3D.R
‚îÇ
‚îú‚îÄ notebooks/
‚îÇ ‚îî‚îÄ BRBseq_analysis.Rmd # Transcriptomic pipeline (BRB-seq)
‚îÇ
‚îú‚îÄ data/
‚îÇ ‚îî‚îÄ README.md # Accessions and metadata only
‚îÇ
‚îú‚îÄ results/
‚îÇ ‚îú‚îÄ figures/
‚îÇ ‚îî‚îÄ tables/
‚îÇ
‚îî‚îÄ docs/
‚îî‚îÄ README.md # References, notes, supplementary info
```
üß≠ **Legend**
- `scripts/python/` ‚Üí **3D imaging** segmentation & quantification  
- `scripts/R/` ‚Üí small R helpers for **imaging** or plotting  
- `notebooks/` ‚Üí **BRB-seq transcriptomic** notebook  
- `data/` ‚Üí metadata and accession information (no raw data)  
- `results/` ‚Üí figures & tables generated by analyses  
- `docs/` ‚Üí documentation, protocols, references  

### TEST3
**Quick index**

| Task | Where to look |
|------|----------------|
| 3D imaging segmentation / quantification | `scripts/python/`and `scripts/R/`|
| BRB-seq full pipeline (Differential expression and miR targets) | `notebooks/BRBseq_analysis.Rmd` |
| Dataset accessions & download instructions | `data/README.md` |
| Figures & tables generated by the code | `results/figures/`, `results/tables/` |

---

## Data availability

Raw and processed data will be available upon publication:

- **RNA-seq raw reads (BRB-seq)**: NCBI SRA / ENA ‚Äî BioProject **PRJNAxxxxxx**
- **Processed counts + metadata**: GEO **GSExxxxxx**
- **3D ovarian imaging**: BioImage Archive **BIA-xxxx**

> Accessions will be updated when available.

---

## Environment setup

### Python (for imaging analysis)
Create and activate the conda environment:
```bash
conda env create -f environment.yml
conda activate mir187-imaging
```

### R (for BRB-seq analysis)
Use renv to restore the exact R environment used in this project.
renv ensures that everyone reproduces the same results by installing the same versions of the R packages.

Run the following commands in R:
```r
install.packages("renv")  # installs renv if not already available
renv::restore()           # installs all the package versions recorded in renv.lock
```

## How to reproduce

1-Clone the repository :
```bash
git clone https://github.com/S-Gay/miR187-medaka-fertility.git
cd miR187-medaka-fertility
```

2-Download datasets
See data/README.md for dataset links and accession numbers.

3-Run the analyses
Imaging: run the Python scripts in scripts/python/
Transcriptomics: open and run the R Markdown notebook notebooks/BRBseq_analysis.Rmd

## If you use this code, please cite:

Unveiling the role of mir-187 in adult ovarian follicle growth and female fecundity in medaka (Oryzias latipes).
Marl√®ne Davilma, St√©phanie Gay, Sully Heng, Fabrice Mah√©, Manon Thomas, Laurence Dubreil, J√©r√¥me Montfort, Aur√©lien Brionne, Julien Bobe, Violette Thermes (2026). 
Version 1.0, Zenodo. DOI: 10.5281/zenodo.xxxxxx

## License

This repository is distributed under the MIT License.
